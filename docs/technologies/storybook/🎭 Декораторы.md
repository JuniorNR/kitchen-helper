# üé≠ –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –≤ Storybook

–î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±—â–∏–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º (—Ç–µ–º—ã, –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã, —Ä–æ—É—Ç–µ—Ä, store, i18n), –Ω–µ –¥—É–±–ª–∏—Ä—É—è –∫–æ–¥ –≤ –∫–∞–∂–¥–æ–π story. –†–∞–±–æ—Ç–∞—é—Ç –Ω–∞ —Ç—Ä—ë—Ö —É—Ä–æ–≤–Ω—è—Ö: –≥–ª–æ–±–∞–ª—å–Ω–æ (`.storybook/preview.ts`), –Ω–∞ —É—Ä–æ–≤–Ω–µ meta (–≤—Å–µ—Ö stories —Ñ–∞–π–ª–∞) –∏ —Ç–æ—á–µ—á–Ω–æ –¥–ª—è –æ–¥–Ω–æ–π story.

## üß≠ –ì–¥–µ –æ–±—ä—è–≤–ª—è—Ç—å
- **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ** ‚Äî `.storybook/preview.ts`, –≤–ª–∏—è—é—Ç –Ω–∞ –≤—Å–µ stories.
- **–ù–∞ —É—Ä–æ–≤–Ω–µ —Ñ–∞–π–ª–∞** ‚Äî —Å–≤–æ–π—Å—Ç–≤–æ `decorators` –≤ meta, –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ –≤—Å–µ–º —ç–∫—Å–ø–æ—Ä—Ç–∞–º —Ñ–∞–π–ª–∞.
- **–¢–æ—á–µ—á–Ω—ã–µ** ‚Äî —Å–≤–æ–π—Å—Ç–≤–æ `decorators` –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π story.

```ts
import type { Preview, Decorator } from '@storybook/react';

// –ì–ª–æ–±–∞–ª—å–Ω—ã–π –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä (–ø—Ä–∏–º–µ—Ä —Å —Ç–µ–º–æ–π)
const withTheme: Decorator = (Story, context) => (
  <ThemeProvider theme={context.globals.theme === 'dark' ? dark : light}>
    <Story />
  </ThemeProvider>
);

export const globalTypes = {
  theme: {
    name: 'Theme',
    defaultValue: 'light',
    toolbar: {
      icon: 'mirror',
      items: ['light', 'dark'],
    },
  },
};

const preview: Preview = {
  decorators: [withTheme],
  parameters: {
    actions: { argTypesRegex: '^on[A-Z].*' },
  },
};

export default preview;
```

## üèóÔ∏è –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

### –ì–ª–æ–±–∞–ª—å–Ω–æ (preview)
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã –ø–æ—á—Ç–∏ –≤–µ–∑–¥–µ: —Ç–µ–º—ã, i18n, –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Å—Ç–æ—Ä, —Å—Ç–∏–ª–∏.

```ts
// .storybook/preview.ts
import { Provider } from 'react-redux';
import { store } from '../src/shared/providers/store';

const withStore: Decorator = (Story) => (
  <Provider store={store}>
    <Story />
  </Provider>
);

const preview: Preview = {
  decorators: [withStore],
};

export default preview;
```

### –ù–∞ —É—Ä–æ–≤–Ω–µ —Ñ–∞–π–ª–∞
–ü–æ–¥—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–∞–±–æ—Ä–∞ stories.

```ts
// Button.stories.tsx
import type { Meta, StoryObj, Decorator } from '@storybook/react';
import { MemoryRouter } from 'react-router-dom';
import { Button } from './Button';

const withRouter: Decorator = (Story) => (
  <MemoryRouter initialEntries={['/']}>
    <Story />
  </MemoryRouter>
);

const meta = {
  title: 'Components/Button',
  component: Button,
  decorators: [withRouter], // –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º stories —Ñ–∞–π–ª–∞
} satisfies Meta<typeof Button>;

export default meta;
type Story = StoryObj<typeof meta>;
```

### –î–ª—è –æ–¥–Ω–æ–π story
–ü–æ–ª–µ–∑–Ω–æ, –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏.

```ts
export const WithPadding: Story = {
  decorators: [
    (Story) => (
      <div style={{ padding: 24, background: '#f5f5f5' }}>
        <Story />
      </div>
    ),
  ],
};
```

## ‚öôÔ∏è –†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞
- `Story` ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–µ–∫—É—â–µ–π story; –≤—ã–∑—ã–≤–∞–π—Ç–µ –∫–∞–∫ `<Story />`.
- `context.globals` ‚Äî –≥–ª–æ–±–∞–ª—ã –∏–∑ `globalTypes` (—Ç–µ–º–∞, —è–∑—ã–∫ –∏ —Ç.–ø.).
- `context.args` ‚Äî –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ args story (–º–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å/–º–µ–Ω—è—Ç—å).
- `context.parameters` ‚Äî –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–≥–ª–æ–±–∞–ª—å–Ω—ã–µ + —Ñ–∞–π–ª–∞ + story).

–ü—Ä–∏–º–µ—Ä: –ø–µ—Ä–µ–¥–∞—ë–º —Ç–µ–∫—É—â—É—é —Ç–µ–º—É –≤ —Å—Ç–∏–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

```ts
const withSurface: Decorator = (Story, context) => {
  const isDark = context.globals.theme === 'dark';
  return (
    <div style={{ background: isDark ? '#121212' : '#fff', padding: 16 }}>
      <Story />
    </div>
  );
};
```

## üß™ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –º–æ–∫–∞—Ü–∏–µ–π
- **MSW**: –¥–æ–±–∞–≤–ª—è–π—Ç–µ —Ö—ç–Ω–¥–ª–µ—Ä—ã —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –¥–µ—Ä–∂–∏—Ç–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä `withMockServer` –≤ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞—Ö.
- **Interactions**: –æ–±–æ—Ä–∞—á–∏–≤–∞–π—Ç–µ –≤ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ (userEvent/within –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –≤ play, –∞ –Ω–µ –≤ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä).
- **Feature flags / env**: –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ —á–µ—Ä–µ–∑ `context.globals` –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ —Ç—É–ª–±–∞—Ä–∞.

```ts
// –ü—Ä–∏–º–µ—Ä MSW
import { http, HttpResponse } from 'msw';

const withMocks: Decorator = (Story) => (
  <Story />
);

export const WithData: Story = {
  decorators: [withMocks],
  parameters: {
    msw: {
      handlers: [
        http.get('/api/data', () => HttpResponse.json({ value: 42 })),
      ],
    },
  },
};
```

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –î–µ–ª–∞–π—Ç–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã **—á–∏—Å—Ç—ã–º–∏**: –Ω–µ –∏–∑–º–µ–Ω—è–π—Ç–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–Ω–µ React.
- –°–æ—Å—Ç–∞–≤–ª—è–π—Ç–µ –º–∞—Å—Å–∏–≤ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤ —Ç–∞–∫, —á—Ç–æ–±—ã —Ç—è–∂–µ–ª—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (store, i18n) –±—ã–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏, –∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ ‚Äî –ª–æ–∫–∞–ª—å–Ω—ã–º–∏.
- –ü–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã: –≤—ã–Ω–µ—Å–∏—Ç–µ –∏—Ö –≤ `src/shared/config/storybook` –∏–ª–∏ —Ä—è–¥–æ–º —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º.
- –ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –≤ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä —Ç—è–∂—ë–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è ‚Äî –∫—ç—à–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–∫–∏.
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ—Ä—è–¥–æ–∫ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤: —Ä–µ–Ω–¥–µ—Ä –∏–¥—ë—Ç —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ (–ø–µ—Ä–≤—ã–π –≤ —Å–ø–∏—Å–∫–µ ‚Äî —Å–∞–º—ã–π –≤–Ω–µ—à–Ω–∏–π).

## üß≠ –ë—ã—Å—Ç—Ä—ã–π —á–µ–∫-–ª–∏—Å—Ç
1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –Ω—É–∂–µ–Ω –ª–∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –≥–ª–æ–±–∞–ª—å–Ω–æ –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ.
2. –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é-–¥–µ–∫–æ—Ä–∞—Ç–æ—Ä (—Ç–∏–ø `Decorator`) –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –≤ `decorators`.
3. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤—å—Ç–µ `globalTypes` –∏ —Ç—É–ª–±–∞—Ä –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è (—Ç–µ–º–∞, —è–∑—ã–∫).
4. –í—ã–Ω–µ—Å–∏—Ç–µ –æ–±—â–∏–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- [[üìö Storybook|technologies/storybook/üìö Storybook]] - –û–±–∑–æ—Ä Storybook
- [[üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è|technologies/storybook/üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è]] - –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Storybook
- [[üìù –°–æ–∑–¥–∞–Ω–∏–µ Stories|technologies/storybook/üìù –°–æ–∑–¥–∞–Ω–∏–µ Stories]] - –ü—Ä–∏–º–µ—Ä—ã stories —Å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞–º–∏
- [[üß© Addons|technologies/storybook/üß© Addons]] - –ê–¥–¥–æ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã
- [[‚ú® Best Practices|technologies/storybook/‚ú® Best Practices]] - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ
- [[üöÄ –ó–∞–ø—É—Å–∫ –∏ –¥–µ–ø–ª–æ–π|technologies/storybook/üöÄ –ó–∞–ø—É—Å–∫ –∏ –¥–µ–ø–ª–æ–π]] - –ó–∞–ø—É—Å–∫ Storybook

